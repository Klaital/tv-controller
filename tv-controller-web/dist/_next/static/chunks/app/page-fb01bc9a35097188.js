(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1773:function(e,t,l){Promise.resolve().then(l.bind(l,9996))},9996:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return S}});var a=l(7437),r=l(2265);function s(e){return(0,a.jsx)("a",{onClick:t=>{e.selectPlaylist(e.playlistId)},className:"playlist inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2",children:e.playlistId},e.playlistId)}function n(e){var t;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"playlist-selection",children:null===(t=e.cfg.playlists_available)||void 0===t?void 0:t.map(t=>(0,a.jsx)(s,{playlistId:t,selectPlaylist:e.selectPlaylist},t))})})}let o=/\{[^{}]+\}/g,i=({allowReserved:e,name:t,value:l})=>{if(null==l)return"";if("object"==typeof l)throw Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${t}=${e?l:encodeURIComponent(l)}`},u=({allowReserved:e,explode:t,name:l,style:a,value:r})=>{if(!t){let t=(e?r:r.map(e=>encodeURIComponent(e))).join((e=>{switch(e){case"form":default:return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20"}})(a));switch(a){case"label":return`.${t}`;case"matrix":return`;${l}=${t}`;case"simple":return t;default:return`${l}=${t}`}}let s=(e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}})(a),n=r.map(t=>"label"===a||"simple"===a?e?t:encodeURIComponent(t):i({allowReserved:e,name:l,value:t})).join(s);return"label"===a||"matrix"===a?s+n:n},c=({allowReserved:e,explode:t,name:l,style:a,value:r})=>{if("deepObject"!==a&&!t){let t=[];Object.entries(r).forEach(([l,a])=>{t=[...t,l,e?a:encodeURIComponent(a)]});let s=t.join(",");switch(a){case"form":return`${l}=${s}`;case"label":return`.${s}`;case"matrix":return`;${l}=${s}`;default:return s}}let s=(e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}})(a),n=Object.entries(r).map(([t,r])=>i({allowReserved:e,name:"deepObject"===a?`${l}[${t}]`:t,value:r})).join(s);return"label"===a||"matrix"===a?s+n:n},d=({allowReserved:e,array:t,object:l}={})=>a=>{let r=[];if(a&&"object"==typeof a)for(let s in a){let n=a[s];null!=n&&(r=Array.isArray(n)?[...r,u({allowReserved:e,explode:!0,name:s,style:"form",value:n,...t})]:"object"!=typeof n?[...r,i({allowReserved:e,name:s,value:n})]:[...r,c({allowReserved:e,explode:!0,name:s,style:"deepObject",value:n,...l})])}return r.join("&")},p=({baseUrl:e,path:t,query:l,querySerializer:a,url:r})=>{let s=e+(r.startsWith("/")?r:`/${r}`);t&&(s=(({path:e,url:t})=>{let l=t,a=t.match(o);if(a)for(let t of a){let a=!1,r=t.substring(1,t.length-1),s="simple";r.endsWith("*")&&(a=!0,r=r.substring(0,r.length-1)),r.startsWith(".")?(r=r.substring(1),s="label"):r.startsWith(";")&&(r=r.substring(1),s="matrix");let n=e[r];null!=n&&(l=Array.isArray(n)?l.replace(t,u({explode:a,name:r,style:s,value:n})):"object"!=typeof n?"matrix"!==s?l.replace(t,"label"===s?`.${n}`:n):l.replace(t,`;${i({name:r,value:n})}`):l.replace(t,c({explode:a,name:r,style:s,value:n})))}return l})({path:t,url:s}));let n=l?a(l):"";return n.startsWith("?")&&(n=n.substring(1)),n&&(s+=`?${n}`),s},f=(...e)=>{let t=new Headers;for(let l of e)if(l&&"object"==typeof l)for(let[e,a]of l instanceof Headers?l.entries():Object.entries(l))if(null===a)t.delete(e);else if(Array.isArray(a))for(let l of a)t.append(e,l);else void 0!==a&&t.set(e,"object"==typeof a?JSON.stringify(a):a);return t};class h{_fns;constructor(){this._fns=[]}eject(e){let t=this._fns.indexOf(e);-1!==t&&(this._fns=[...this._fns.slice(0,t),...this._fns.slice(t+1)])}use(e){this._fns=[...this._fns,e]}}let y=()=>({request:new h,response:new h}),b={bodySerializer:e=>JSON.stringify(e)},m=d({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),v={"Content-Type":"application/json"},g=()=>({...b,baseUrl:"",fetch:globalThis.fetch,global:!0,headers:v,querySerializer:m}),j=g(),x=y(),_=e=>{let t=g(),l={...t,...e};l.baseUrl?.endsWith("/")&&(l.baseUrl=l.baseUrl.substring(0,l.baseUrl.length-1)),l.headers=f(t.headers,l.headers),l.global&&(j={...l});let a=()=>l.global?j:l,r=l.global?x:y(),s=async e=>{let t=a(),l={...t,...e,headers:f(t.headers,e.headers)};l.body&&l.bodySerializer&&(l.body=l.bodySerializer(l.body));let s=p({baseUrl:l.baseUrl??"",path:l.path,query:l.query,querySerializer:"function"==typeof l.querySerializer?l.querySerializer:d(l.querySerializer),url:l.url}),n={redirect:"follow",...l};n.body instanceof FormData&&n.headers.delete("Content-Type");let o=new Request(s,n);for(let e of r.request._fns)o=await e(o,l);let i=l.fetch,u=await i(o);for(let e of r.response._fns)u=await e(u,o,l);let c={request:o,response:u};if(204===u.status||"0"===u.headers.get("Content-Length"))return u.ok?{data:{},...c}:{error:{},...c};if(u.ok){if("stream"===l.parseAs)return{data:u.body,...c};let t=("auto"===l.parseAs?(e=>{if(e)return"application/json"===e||e.endsWith("+json")?"json":"multipart/form-data"===e?"formData":["application/octet-stream","application/pdf","application/zip","audio/","image/","video/"].some(t=>e.includes(t))?"blob":e.includes("text/")?"text":void 0})(u.headers.get("Content-Type")):l.parseAs)??"json",a=await u[t]();return"json"===t&&e.responseTransformer&&(a=await e.responseTransformer(a)),{data:a,...c}}let h=await u.text();try{h=JSON.parse(h)}catch{}return{error:h,...c}};return{connect:e=>s({...e,method:"CONNECT"}),delete:e=>s({...e,method:"DELETE"}),get:e=>s({...e,method:"GET"}),getConfig:a,head:e=>s({...e,method:"HEAD"}),interceptors:r,options:e=>s({...e,method:"OPTIONS"}),patch:e=>s({...e,method:"PATCH"}),post:e=>s({...e,method:"POST"}),put:e=>s({...e,method:"PUT"}),request:s,trace:e=>s({...e,method:"TRACE"})}},w=_(j),C=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:w).put({...e,url:"/ctrl/pause"})},$=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:w).get({...e,url:"/cfg"})},O=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:w).put({...e,url:"/cfg/playlist"})};function S(){let[e,t]=(0,r.useState)({playlists_available:["test1.m3u","test2.m3u"],selected_playlist:"",shuffle:!0,loop:!0,vlc_path:""});return(0,r.useEffect)(()=>{$().then(e=>{var l,a,r,s,n;t({playlists_available:null===(l=e.data)||void 0===l?void 0:l.playlists_available,selected_playlist:null===(a=e.data)||void 0===a?void 0:a.selected_playlist,shuffle:null===(r=e.data)||void 0===r?void 0:r.shuffle,loop:null===(s=e.data)||void 0===s?void 0:s.loop,vlc_path:null===(n=e.data)||void 0===n?void 0:n.vlc_path})}).catch(e=>{console.log(e)})},[]),(0,a.jsxs)("main",{children:[(0,a.jsx)("h1",{children:"Playlists"}),(0,a.jsx)(n,{cfg:e,selectPlaylist:function(l){console.log("Selected Playlist: "+l),O({body:{playlist:l}}).then(a=>{console.log("active playlist updated"),t({playlists_available:e.playlists_available,selected_playlist:l,shuffle:e.shuffle,loop:e.loop,vlc_path:e.vlc_path})}).catch(e=>{console.log(e)})}}),(0,a.jsxs)("div",{className:"playback-control",children:[(0,a.jsx)("h2",{children:"Playback Controls"}),(0,a.jsx)("a",{onClick:e=>{e.preventDefault(),C().then(e=>{console.log("playback paused")}).catch(e=>{console.log("playback pause error: "+e)})},className:"playlist inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2",children:"⏯"})]})]})}_({baseUrl:"http://192.168.88.178:8080"})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=1773)}),_N_E=e.O()}]);